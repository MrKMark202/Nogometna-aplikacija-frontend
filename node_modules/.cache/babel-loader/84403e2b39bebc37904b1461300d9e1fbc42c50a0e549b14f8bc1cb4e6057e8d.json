{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { db, auth, collection, getDocs, setDoc, doc, ref, uploadBytes, storage, onAuthStateChanged, getDownloadURL } from '@/firebase';\nexport default {\n  name: \"CreateClub\",\n  data: () => ({\n    clubName: null,\n    clubCountry: null,\n    clubYear: null,\n    ligas: [],\n    selectedLiga: '',\n    KlubPictureURL: '',\n    form: false,\n    isLoading: false,\n    rules: {\n      required: v => !!v || 'This field is required'\n    }\n  }),\n  mounted() {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        const colRef = collection(db, \"Users\", user.email, \"Lige\");\n        getDocs(colRef).then(querySnapshot => {\n          querySnapshot.forEach(doc => {\n            this.ligas.push(doc.id);\n          });\n        }).catch(error => {\n          console.error(\"Error fetching subcollection documents:\", error);\n        });\n      } else {\n        console.log(\"User is not loged in\");\n      }\n    });\n  },\n  methods: {\n    clearFormData() {\n      this.clubName = null;\n      this.clubYear = null;\n      this.clubCountry = null;\n      this.selectedLiga = '';\n    },\n    async UploadLigaImageToStorage() {\n      // Your existing code for image upload\n\n      // After the upload is complete, call the Remove.bg API to remove the background\n      const removeBgApiKey = 'YOUR_REMOVE_BG_API_KEY'; // Replace with your actual API key\n      const removeBgApiUrl = 'https://api.remove.bg/v1.0/removebg';\n      const formData = new FormData();\n      formData.append('image_file', this.$refs.ligaPictureFile.files[0]);\n      await fetch(removeBgApiUrl, {\n        method: 'POST',\n        headers: {\n          'X-Api-Key': removeBgApiKey\n        },\n        body: formData\n      }).then(response => response.blob()).then(blob => {\n        const storageRef = ref(storage, \"Users/\" + auth.currentUser.email + \"/KlubPicture \" + this.clubName);\n        uploadBytes(storageRef, blob).then(snapshot => {\n          console.log(\"Image with background removed uploaded!\");\n          getDownloadURL(snapshot.ref).then(url => {\n            this.KlubPictureURL = url;\n            this.createKlub();\n            this.createDataTable();\n          }).catch(error => {\n            console.error(\"Error getting download URL:\", error);\n          });\n        }).catch(error => {\n          console.error(\"Error uploading image:\", error);\n        });\n      }).catch(error => {\n        console.error(\"Error removing background:\", error);\n      });\n    },\n    /*\r\n          async UploadLigaImageToStorage() {\r\n            const storageRef = ref(storage, \"Users/\" + auth.currentUser.email + \"/KlubPicture \" + this.clubName);\r\n    \r\n            await uploadBytes(storageRef, this.$refs.ligaPictureFile.files[0]).then((snapshot) => {\r\n            console.log(\"Upload complete!\");\r\n    \r\n              getDownloadURL(snapshot.ref).then((url) => {\r\n                this.KlubPictureURL = url;\r\n                this.createKlub();\r\n                this.createDataTable()\r\n              }).catch((error) => {\r\n                console.error(\"Error getting download URL:\", error);\r\n              });\r\n            }).catch((error) => {\r\n              console.error(\"Error uploading image:\", error);\r\n            });\r\n          },  \r\n    */\n    async createKlub() {\n      await setDoc(doc(db, \"Users\", auth.currentUser.email, \"Lige\", this.selectedLiga, \"Klubovi\", this.clubName), {\n        clubName: this.clubName,\n        clubYear: this.clubYear,\n        clubCountry: this.clubCountry,\n        imageURL: this.KlubPictureURL\n      });\n    },\n    async createDataTable() {\n      await setDoc(doc(db, \"Users\", auth.currentUser.email, \"Lige\", this.selectedLiga, \"Klubovi\", this.clubName, \"Tablica lige\", \"Podaci\"), {\n        Bodovi: 0,\n        Postignutih_pogodaka: 0,\n        Primljenih_pogodaka: 0,\n        imageURL: this.KlubPictureURL\n      });\n      this.clearFormData();\n    }\n  }\n};","map":{"version":3,"names":["db","auth","collection","getDocs","setDoc","doc","ref","uploadBytes","storage","onAuthStateChanged","getDownloadURL","name","data","clubName","clubCountry","clubYear","ligas","selectedLiga","KlubPictureURL","form","isLoading","rules","required","v","mounted","user","colRef","email","then","querySnapshot","forEach","push","id","catch","error","console","log","methods","clearFormData","UploadLigaImageToStorage","removeBgApiKey","removeBgApiUrl","formData","FormData","append","$refs","ligaPictureFile","files","fetch","method","headers","body","response","blob","storageRef","currentUser","snapshot","url","createKlub","createDataTable","imageURL","Bodovi","Postignutih_pogodaka","Primljenih_pogodaka"],"sources":["src/views/KreirajKLUB.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"naslov\">\r\n            <h1>Kreiraj klub</h1>\r\n        </div>\r\n    \r\n        <div class=\"obrub\" data-app>\r\n          <v-form ref=\"form\" v-model=\"form\" style=\"margin-top: 20px;\">\r\n            <v-text-field v-model=\"clubName\" label=\"Naziv kluba\" variant=\"underlined\" :rules=\"[rules.required]\"></v-text-field>\r\n            <v-text-field v-model=\"clubYear\" label=\"Godina osnivanja\" variant=\"underlined\" :rules=\"[rules.required]\"></v-text-field>\r\n            <v-text-field v-model=\"clubCountry\" label=\"DrÅ¾ava\" variant=\"underlined\" :rules=\"[rules.required]\"></v-text-field>\r\n\r\n            <v-row class=\"row2\">\r\n              <v-col>\r\n                  <div>\r\n                      <v-select\r\n                        :rules=\"[rules.required]\"\r\n                        :items=\"ligas\"\r\n                        label=\"Izaberite ligu za koju kreirate klub!\"\r\n                        v-model=\"selectedLiga\"\r\n                        class=\"vselect\"\r\n                      ></v-select>\r\n                      <br><br>\r\n                  </div>\r\n              </v-col>\r\n            </v-row>\r\n          </v-form>\r\n            <h3 class=\"grb\">Grb Kluba</h3>\r\n\r\n            <input \r\n                class=\"butot\" \r\n                type=\"file\" \r\n                ref=\"ligaPictureFile\" \r\n            />\r\n\r\n            <v-btn \r\n              @click=\"UploadLigaImageToStorage()\" \r\n              elevation=\"2\" \r\n              :disabled=\"!form\"\r\n              :loading=\"isLoading\"\r\n              style=\"background-color: green; color: white; margin-top:40px; margin-left: 85% !important;\">Kreiraj!</v-btn>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import {db, auth, collection, getDocs, setDoc, doc, ref, uploadBytes, storage, onAuthStateChanged, getDownloadURL} from '@/firebase';\r\n\r\n  export default {\r\n    name: \"CreateClub\",\r\n    data: () => ({\r\n      clubName: null,\r\n      clubCountry: null,\r\n      clubYear: null,\r\n      ligas: [],\r\n      selectedLiga: '',\r\n      KlubPictureURL: '',\r\n      form: false,\r\n      isLoading: false,\r\n      rules: {\r\n        required: v => !!v || 'This field is required'\r\n      },\r\n    }),\r\n\r\n   mounted() {\r\n      onAuthStateChanged(auth, (user) => {\r\n\t\t\tif (user) {\r\n        const colRef = collection(db, \"Users\", user.email, \"Lige\");\r\n        getDocs(colRef)\r\n          .then((querySnapshot) => {\r\n            querySnapshot.forEach((doc) => {\r\n            this.ligas.push(doc.id);\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching subcollection documents:\", error);\r\n        });\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"User is not loged in\");\r\n\t\t\t}\r\n\t\t});\r\n   },\r\n\r\n    methods: {\r\n      clearFormData() {\r\n\t\t\t  this.clubName = null;\r\n\t\t\t  this.clubYear = null;\r\n\t\t\t  this.clubCountry = null;\r\n        this.selectedLiga = '';\r\n\t\t  },\r\n\r\n      async UploadLigaImageToStorage() {\r\n  // Your existing code for image upload\r\n\r\n  // After the upload is complete, call the Remove.bg API to remove the background\r\n  const removeBgApiKey = 'YOUR_REMOVE_BG_API_KEY'; // Replace with your actual API key\r\n  const removeBgApiUrl = 'https://api.remove.bg/v1.0/removebg';\r\n\r\n  const formData = new FormData();\r\n  formData.append('image_file', this.$refs.ligaPictureFile.files[0]);\r\n\r\n  await fetch(removeBgApiUrl, {\r\n    method: 'POST',\r\n    headers: {\r\n      'X-Api-Key': removeBgApiKey\r\n    },\r\n    body: formData\r\n  })\r\n  .then(response => response.blob())\r\n  .then(blob => {\r\n    const storageRef = ref(storage, \"Users/\" + auth.currentUser.email + \"/KlubPicture \" + this.clubName);\r\n    uploadBytes(storageRef, blob).then(snapshot => {\r\n      console.log(\"Image with background removed uploaded!\");\r\n      getDownloadURL(snapshot.ref).then(url => {\r\n        this.KlubPictureURL = url;\r\n        this.createKlub();\r\n        this.createDataTable();\r\n      }).catch(error => {\r\n        console.error(\"Error getting download URL:\", error);\r\n      });\r\n    }).catch(error => {\r\n      console.error(\"Error uploading image:\", error);\r\n    });\r\n  })\r\n  .catch(error => {\r\n    console.error(\"Error removing background:\", error);\r\n  });\r\n},\r\n\r\n/*\r\n      async UploadLigaImageToStorage() {\r\n        const storageRef = ref(storage, \"Users/\" + auth.currentUser.email + \"/KlubPicture \" + this.clubName);\r\n\r\n        await uploadBytes(storageRef, this.$refs.ligaPictureFile.files[0]).then((snapshot) => {\r\n        console.log(\"Upload complete!\");\r\n\r\n          getDownloadURL(snapshot.ref).then((url) => {\r\n            this.KlubPictureURL = url;\r\n            this.createKlub();\r\n            this.createDataTable()\r\n          }).catch((error) => {\r\n            console.error(\"Error getting download URL:\", error);\r\n          });\r\n        }).catch((error) => {\r\n          console.error(\"Error uploading image:\", error);\r\n        });\r\n      },  \r\n*/\r\n      async createKlub() {\r\n        await setDoc(\r\n          doc(db, \"Users\", auth.currentUser.email, \"Lige\", this.selectedLiga, \"Klubovi\", this.clubName),\r\n          {\r\n            clubName: this.clubName,\r\n            clubYear: this.clubYear,\r\n            clubCountry: this.clubCountry,\r\n            imageURL: this.KlubPictureURL\r\n          }\r\n        );\r\n        },\r\n\r\n        async createDataTable() {\r\n          await setDoc(\r\n            doc(db, \"Users\", auth.currentUser.email, \"Lige\", this.selectedLiga, \"Klubovi\", this.clubName, \"Tablica lige\", \"Podaci\"),\r\n            {\r\n              Bodovi: 0,\r\n              Postignutih_pogodaka: 0,\r\n              Primljenih_pogodaka: 0,\r\n              imageURL: this.KlubPictureURL\r\n            }\r\n          )\r\n          this.clearFormData();\r\n        },\r\n      },\r\n  };\r\n</script>\r\n\r\n\r\n<style>\r\n  .obrub\r\n  {\r\n    border: 2px solid white;\r\n    background-color: white;\r\n    padding: 50px;\r\n    margin-left: 20%;\r\n    margin-right: 20%;\r\n    margin-top: 100px; \r\n  }\r\n\r\n  .v-text-field\r\n  {\r\n    font-size: 20px !important;\r\n    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .row2\r\n  {\r\n    color: black;\r\n    text-align: center;\r\n  }\r\n\r\n  .vselect\r\n  {\r\n    font-size: 20px !important;\r\n    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif !important;\r\n  }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}