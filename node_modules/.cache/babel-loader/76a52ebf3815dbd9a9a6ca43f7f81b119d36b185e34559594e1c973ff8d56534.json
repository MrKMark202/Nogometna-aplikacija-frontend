{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"LoginIN\",\n  data: () => ({\n    passwordIssuesDialog: false,\n    agreement: false,\n    email: null,\n    form: false,\n    isLoading: false,\n    password: null,\n    valid: true,\n    showIcon: false,\n    rules: {\n      email: v => !!(v || '').match(/@/) || 'Please enter a valid email',\n      length: len => v => (v || '').length >= len || `Invalid character length, required ${len}`,\n      password: v => !!(v || '').match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*(_|[^\\w])).+$/) || 'Password must contain an upper case letter, a numeric character, and a special character',\n      required: v => !!v || 'This field is required'\n    }\n  }),\n  postActionMoveToView() {\n    this.$router.push({\n      path: \"/\"\n    });\n  },\n  methods: {\n    async login() {\n      try {\n        const response = await fetch(\"backend ruta\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": 'application/json; charset=utf-8'\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            email: this.email,\n            password: this.password\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          document.cookie = `token=${data.token}; max-age=${7 * 24 * 60 * 60}; secure; path=/`;\n          localStorage.setItem('jwtToken', data.token);\n          localStorage.setItem('userEmail', data.userEmail);\n          this.$router.push(\"/\");\n          console.log(\"Uspješna prijava\");\n        } else {\n          console.log(\"error\");\n        }\n      } catch (error) {\n        const errorMessage = error && error.message ? error.message : \"Invalid email or password\";\n        this.$message.error(errorMessage);\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","passwordIssuesDialog","agreement","email","form","isLoading","password","valid","showIcon","rules","v","match","length","len","required","postActionMoveToView","$router","push","path","methods","login","response","fetch","method","headers","credentials","body","JSON","stringify","json","ok","document","cookie","token","localStorage","setItem","userEmail","console","log","error","errorMessage","message","$message"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n\r\n  <div>\r\n    <div class=\"naslov2\">\r\n        <h1>LogIn</h1>\r\n    </div>\r\n\r\n    <v-card\r\n      class=\"mx-auto\"\r\n      style=\"max-width: 500px; margin-top: 80px; margin-left: auto; margin-right:auto; padding: 30px;\"\r\n    >\r\n\r\n      <v-card-title> Još nisi napravio račun? <v-btn to=\"/SignUP\" style=\"margin-left:10px; color:black; text-decoration: none;\"> Registriraj se! </v-btn> </v-card-title>\r\n\r\n      <v-form\r\n        ref=\"form\"\r\n        v-model=\"form\"\r\n        style=\"margin-top: 20px;\"\r\n      >\r\n        <v-text-field\r\n            v-model=\"email\"\r\n            :rules=\"[rules.email]\"\r\n            filled\r\n            color=\"black\"\r\n            label=\"Email adresa\"\r\n            style=\"min-height: 100px\"\r\n            type=\"email\"\r\n          ></v-text-field>\r\n\r\n          <v-text-field\r\n            v-model=\"password\"\r\n            :rules=\"[rules.password, rules.length(6)]\"\r\n            filled\r\n            color=\"black\"\r\n            label=\"Lozinka\"\r\n            style=\"min-height: 100px\"\r\n            type=\"password\"\r\n          ></v-text-field>\r\n      </v-form>\r\n      <v-card-actions>\r\n        <v-btn\r\n          class=\"link-left\"\r\n          text\r\n          x-small\r\n          color=\"blue\"\r\n          to=\"/passReset\"\r\n          >\r\n          Zaboravili ste lozinku?\r\n        </v-btn>\r\n\r\n        <v-spacer></v-spacer>\r\n\r\n        <v-btn\r\n          :disabled=\"!form\"\r\n          :loading=\"isLoading\"\r\n          class=\"white--text\"\r\n          color=\"black\"\r\n          depressed\r\n          @click=\"login\"\r\n        >\r\n          LogIN!\r\n        </v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"LoginIN\",\r\n    data: () => ({\r\n\t\t\tpasswordIssuesDialog: false,\r\n      agreement: false,\r\n      email: null,\r\n      form: false,\r\n      isLoading: false,\r\n      password: null,\r\n      valid: true,\r\n      showIcon: false,\r\n      rules: {\r\n        email: v => !!(v || '').match(/@/) || 'Please enter a valid email',\r\n        length: len => v => (v || '').length >= len || `Invalid character length, required ${len}`,\r\n        password: v => !!(v || '').match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*(_|[^\\w])).+$/) ||\r\n          'Password must contain an upper case letter, a numeric character, and a special character',\r\n        required: v => !!v || 'This field is required',\r\n      },\r\n    }),\r\n\r\n      postActionMoveToView() {\r\n\t\t\t  this.$router.push({ path: \"/\" });\r\n\t\t  },\r\n\r\n      methods: {\r\n    async login() {\r\n      try {\r\n        const response = await fetch(\"backend ruta\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": 'application/json; charset=utf-8' },\r\n          credentials: 'include',\r\n          body: JSON.stringify({\r\n            email: this.email,\r\n            password: this.password,\r\n\r\n          }),\r\n        });\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          document.cookie = `token=${data.token}; max-age=${7 * 24 * 60 * 60}; secure; path=/`;\r\n          localStorage.setItem('jwtToken', data.token);\r\n          localStorage.setItem('userEmail', data.userEmail);\r\n          \r\n          this.$router.push(\"/\");\r\n          console.log(\"Uspješna prijava\");\r\n        } else {\r\n          console.log(\"error\");\r\n        }\r\n      } catch (error) {\r\n          const errorMessage = error && error.message ? error.message : \"Invalid email or password\";\r\n          this.$message.error(errorMessage);\r\n      }\r\n    },\r\n  },\r\n  };\r\n</script>\r\n\r\n<style>\r\n.naslov2\r\n  {\r\n    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;\r\n    text-align: center;\r\n    color: white;\r\n    margin-top:120px;\r\n  }\r\n</style>"],"mappings":";AAoEA;EACAA,IAAA;EACAC,IAAA,EAAAA,CAAA;IACAC,oBAAA;IACAC,SAAA;IACAC,KAAA;IACAC,IAAA;IACAC,SAAA;IACAC,QAAA;IACAC,KAAA;IACAC,QAAA;IACAC,KAAA;MACAN,KAAA,EAAAO,CAAA,OAAAA,CAAA,QAAAC,KAAA;MACAC,MAAA,EAAAC,GAAA,IAAAH,CAAA,KAAAA,CAAA,QAAAE,MAAA,IAAAC,GAAA,0CAAAA,GAAA;MACAP,QAAA,EAAAI,CAAA,OAAAA,CAAA,QAAAC,KAAA,yDACA;MACAG,QAAA,EAAAJ,CAAA,MAAAA,CAAA;IACA;EACA;EAEAK,qBAAA;IACA,KAAAC,OAAA,CAAAC,IAAA;MAAAC,IAAA;IAAA;EACA;EAEAC,OAAA;IACA,MAAAC,MAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA;UACAC,MAAA;UACAC,OAAA;YAAA;UAAA;UACAC,WAAA;UACAC,IAAA,EAAAC,IAAA,CAAAC,SAAA;YACAzB,KAAA,OAAAA,KAAA;YACAG,QAAA,OAAAA;UAEA;QACA;QACA,MAAAN,IAAA,SAAAqB,QAAA,CAAAQ,IAAA;QACA,IAAAR,QAAA,CAAAS,EAAA;UACAC,QAAA,CAAAC,MAAA,YAAAhC,IAAA,CAAAiC,KAAA;UACAC,YAAA,CAAAC,OAAA,aAAAnC,IAAA,CAAAiC,KAAA;UACAC,YAAA,CAAAC,OAAA,cAAAnC,IAAA,CAAAoC,SAAA;UAEA,KAAApB,OAAA,CAAAC,IAAA;UACAoB,OAAA,CAAAC,GAAA;QACA;UACAD,OAAA,CAAAC,GAAA;QACA;MACA,SAAAC,KAAA;QACA,MAAAC,YAAA,GAAAD,KAAA,IAAAA,KAAA,CAAAE,OAAA,GAAAF,KAAA,CAAAE,OAAA;QACA,KAAAC,QAAA,CAAAH,KAAA,CAAAC,YAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}